<!DOCTYPE HTML>
<html>
    <head>
        <title>Wx login test</title>

        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js">
        </script>
    </head>

    <body>
        <h1>a test page</h1>
        <div id = "userinfo"></div>
            <script>
                function getUrlParam(name) {
                    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                    var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                    if (r != null) return unescape(r[2]); return null; //返回参数值
                }

                // https://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&redirect_uri=REDIRECT_URI&response_type=code&scope=SCOPE&state=STATE#wechat_redirect 
                var code = getUrlParam('code')
                var url = 'login?code=' + code;
                
                $.get(url, function(result){
                    $("#userinfo").html(result);
                });
            </script>
    </body>
</html>
